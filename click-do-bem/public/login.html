<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Login</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
        integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
</head>

 <script type="module">
  // Importa o Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } 
          from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getFirestore, doc, setDoc } 
          from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  // 游댐 Configura칞칚o do Firebase (substitua pelos seus dados do console Firebase)
const firebaseConfig = {
  apiKey: "AIzaSyAYZsqcE0hNnE1CFYUWwGbqP1l9pGsS0xs",
  authDomain: "click-do-bem-99516.firebaseapp.com",
  projectId: "click-do-bem-99516",
  storageBucket: "click-do-bem-99516.firebasestorage.app",
  messagingSenderId: "562779049863",
  appId: "1:562779049863:web:2cddaf4c417de324284d22",
  measurementId: "G-PLNSJJN28V"
};

  // Inicializa Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Cadastro de usu치rio
  document.getElementById("btnCadastro").addEventListener("click", async () => {
    const email = document.getElementById("cadEmail").value;
    const senha = document.getElementById("cadSenha").value;

    try {
      const userCredential = await createUserWithEmailAndPassword(auth, email, senha);
      const user = userCredential.user;

      // Salva dados adicionais no Firestore
      await setDoc(doc(db, "usuarios", user.uid), {
        email: email,
        criadoEm: new Date()
      });

      alert("Cadastro realizado com sucesso!");
    } catch (error) {
      alert("Erro: " + error.message);
    }
  });

  // Login de usu치rio
  document.getElementById("btnLogin").addEventListener("click", async () => {
    const email = document.getElementById("loginEmail").value;
    const senha = document.getElementById("loginSenha").value;

    try {
      await signInWithEmailAndPassword(auth, email, senha);
      alert("Login realizado com sucesso!");
      window.location.href = "doar.html"; // redireciona ap칩s login
    } catch (error) {
      alert("Erro: " + error.message);
    }
  });
</script>

<body>
       <!-- Formul치rio de Cadastro -->
<div>
  <h2>Cadastrar</h2>
  <input type="email" id="cadEmail" placeholder="Email">
  <input type="password" id="cadSenha" placeholder="Senha">
  <button id="btnCadastro">Cadastrar</button>
</div>

<!-- Formul치rio de Login -->
<div>
  <h2>Login</h2>
  <input type="email" id="loginEmail" placeholder="Email">
  <input type="password" id="loginSenha" placeholder="Senha">
  <button id="btnLogin">Entrar</button>
</div>
                    
</body>
</html>